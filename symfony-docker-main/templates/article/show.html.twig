{% extends 'base.html.twig' %}

{% block title %}Article{% endblock %}

{% block body %}
    <div class="article-details">
        <h1 class="article-title">{{ article.titre }}</h1>

        <div class="article-meta">
            <p class="article-date">{{ article.datePublication ? article.datePublication|date('Y-m-d') : '' }}</p>
        </div>

        {% if article.image %}
            <img src="{{ asset('images/' ~ article.image.filename) }}" alt="Image de l'article">
        {% endif %}

        <p class="article-content">{{ article.contenu }}</p>

        {{ dump(article.id) }}
        {{ form_start(comment_form, {'action': path('app_comment_new', {'articleId': article.id}), 'method': 'POST'}) }}
        {{ form_widget(comment_form) }}
        <button type="submit" class="btn btn-primary">Ajouter un commentaire</button>
        {{ form_end(comment_form) }}


        <div class="flash-messages">
            {% for flashType, messages in app.flashes %}
                {% for message in messages %}
                    <div class="alert alert-{{ flashType }}">
                        {{ message }}
                    </div>
                {% endfor %}
            {% endfor %}
        </div>

        <a href="{{ path('app_article_index') }}" class="btn btn-primary">Retour à la liste</a>
        <a href="{{ path('app_article_edit', {'id': article.id}) }}" class="btn btn-success">Éditer</a>
    </div>
{% endblock %}
